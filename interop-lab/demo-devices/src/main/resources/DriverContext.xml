<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-4.1.xsd
                           http://www.springframework.org/schema/util
                           http://www.springframework.org/schema/util/spring-util-4.1.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd">


    <context:annotation-config />

    <bean id="driver"
          class="org.mdpnp.apps.testapp.DeviceAdapterImpl.AbstractDeviceFactory"
          destroy-method="shutdown">
    </bean>

    <bean id="partition" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
      <property name="targetObject" ref="driver"/>
      <property name="targetMethod" value="getPartitionAssignmentController"/>
    </bean>



    <bean id="jmxServer" class="org.springframework.jmx.support.MBeanServerFactoryBean">
      <property name="locateExistingServerIfPossible" value="true"/>
    </bean>

    <bean id="attributeSource"
          class="org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource"/>

    <bean id="assembler" class="org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler">
      <property name="attributeSource" ref="attributeSource"/>
    </bean>

    <bean id="namingStrategy" class="org.mdpnp.apps.testapp.DeviceAdapterImpl.DeviceFactoryNamingStrategy">
    </bean>

    <!--
        List of managed beans that specify managed attributes via annotations.
    -->
    <bean id="annotations.exporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
      <property name="assembler" ref="assembler"/>
      <property name="autodetect" value="true"/>
      <property name="namingStrategy" ref="namingStrategy"/>
    </bean>

</beans>